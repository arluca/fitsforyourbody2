<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fits ForYourBody</title>
    <style> 
        body {
            font-family: 'Times New Roman', serif;
            margin: 0;
            padding: 0;
            background: #ffffff;
            color: #2c2c2c;
        }

        .header {
            background: #000000;
            color: white;
            text-align: center;
            padding: 20px 0;
        }

        .header h1 {
            font-size: 28px;
            letter-spacing: 4px;
            text-transform: uppercase;
            margin: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .mission {
            background: #f8f9fa;
            padding: 60px 0;
            text-align: center;
        }

        .mission h2 {
            font-size: 32px;
            margin-bottom: 30px;
        }

        .mission p {
            font-size: 18px;
            color: #666;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }

        .hero {
            padding: 80px 0;
            background: white;
        }

        .hero-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }

        .hero h2 {
            font-size: 48px;
            margin-bottom: 30px;
            line-height: 1.2;
        }

        .hero p {
            font-size: 20px;
            color: #666;
            margin-bottom: 40px;
            line-height: 1.7;
        }

        .hero-image {
            background: #f1f3f4;
            height: 400px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-style: italic;
            overflow: hidden;
        }
        
        .hero-image img, .photo-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-section {
            padding: 60px 0;
            background: white;
        }

        .photo-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 40px;
        }

        .photo-placeholder {
            background: #f1f3f4;
            height: 300px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-style: italic;
        }

        .how-works {
            padding: 80px 0;
            background: #f8f9fa;
        }

        .how-works h2 {
            font-size: 36px;
            text-align: center;
            margin-bottom: 60px;
        }

        .works-boxes {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-bottom: 50px;
        }

        .work-box {
            background: white;
            padding: 40px 30px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }

        .work-box:hover {
            transform: translateY(-8px);
        }

        .work-box .icon {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .work-box h3 {
            font-size: 20px;
            margin-bottom: 15px;
        }

        .work-box p {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
        }

        .research-banner {
            background: white;
            padding: 50px 60px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .research-banner h3 {
            font-size: 28px;
            margin-bottom: 25px;
            text-align: center;
            color: #2c2c2c;
        }

        .research-banner p {
            font-size: 17px;
            color: #555;
            line-height: 1.9;
            text-align: justify;
        }

        .btn {
            background: #2c2c2c;
            color: white;
            padding: 16px 32px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #000;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .upload-section {
            padding: 80px 0;
        }

        .upload-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 60px;
        }

        .form-card {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .form-card h3 {
            font-size: 22px;
            margin-bottom: 25px;
        }

        .upload-area {
            border: 3px dashed #ddd;
            padding: 50px 20px;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            background: #fafafa;
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: #999;
            background: #f0f0f0;
        }

        input[type="text"] {
            width: 100%;
            padding: 16px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            background: #fafafa;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #2c2c2c;
            background: white;
        }

        .quiz-card {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            max-width: 700px;
            margin: 0 auto 40px;
        }

        .quiz-question {
            margin-bottom: 30px;
        }

        .quiz-question h4 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #2c2c2c;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 15px 20px;
            border: 2px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            text-align: left;
        }

        .quiz-option:hover {
            border-color: #2c2c2c;
            background: #f8f9fa;
        }

        .quiz-option.selected {
            border-color: #2c2c2c;
            background: #2c2c2c;
            color: white;
        }

        .style-prefs {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            max-width: 600px;
            margin: 0 auto 60px;
        }

        .style-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2px;
            border: 2px solid #ddd;
            margin-top: 25px;
        }

        .style-btn {
            padding: 15px;
            border: none;
            background: white;
            cursor: pointer;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: background 0.3s ease;
        }

        .style-btn:hover {
            background: #f0f0f0;
        }

        .style-btn.active {
            background: #2c2c2c;
            color: white;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .hero-grid, .upload-grid, .photo-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .hero h2 {
                font-size: 36px;
            }

            .works-boxes {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .research-banner {
                padding: 30px 25px;
            }

            .research-banner p {
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>FITS FOR YOUR BODY</h1>
    </header>

    <section class="mission">
        <div class="container">
            <h2>Our Mission</h2>
            <p>We believe everyone deserves to feel confident in their clothing choices. Our platform addresses clothing and body insecurity by providing a supportive, evidence-based approach to personal styling. By serving as a helpful middleman in deciding what to wear, we empower users to embrace their unique body type and feel their most confident self through fashion choices that truly work for them.</p>
        </div>
    </section>

    <div id="welcome-screen">
        <section class="hero">
            <div class="container">
                <div class="hero-grid">
                    <div>
                        <h2>Discover Your Perfect Style</h2>
                        <p>Get personalized, research-backed fashion recommendations tailored to your unique body type and current weather. Our evidence-based approach helps you feel confident and look amazing in styles that truly work for you.</p>
                        <button class="btn" onclick="startUpload()">Begin Style Journey</button>
                    </div>
                    <div class="hero-image">
                        <img src="image1.jpg" alt="Diverse group of women in stylish black outfits" onerror="this.style.display='none'; this.parentElement.innerHTML='Fashion Photography Placeholder 1';">
                    </div>
                </div>
            </div>
        </section>

        <section class="photo-section">
            <div class="container">
                <div class="photo-grid">
                    <div class="photo-placeholder">
                        <img src="image2.jpg" alt="Women in black dresses showcasing different styles" onerror="this.style.display='none'; this.parentElement.innerHTML='Fashion Photography Placeholder 2';">
                    </div>
                    <div class="photo-placeholder">
                        <img src="image3.jpg" alt="Fashion group wearing mixed patterns and styles" onerror="this.style.display='none'; this.parentElement.innerHTML='Fashion Photography Placeholder 3';">
                    </div>
                    <div class="photo-placeholder">
                        <img src="image4.jpg" alt="Diverse group in athletic and streetwear fashion" onerror="this.style.display='none'; this.parentElement.innerHTML='Fashion Photography Placeholder 4';">
                    </div>
                </div>
            </div>
        </section>

        <section class="how-works">
            <div class="container">
                <h2>How It Works</h2>
                <div class="works-boxes">
                    <div class="work-box">
                        <div class="icon">üì∑</div>
                        <h3>Upload Photo</h3>
                        <p>Share a full-body photo for personalized body type analysis. Your privacy is completely protected.</p>
                    </div>
                    <div class="work-box">
                        <div class="icon">üß†</div>
                        <h3>AI Analysis</h3>
                        <p>Our advanced algorithm analyzes your unique body proportions and local weather conditions to generate personalized styling recommendations.</p>
                    </div>
                    <div class="work-box">
                        <div class="icon">‚ú®</div>
                        <h3>Style Recommendations</h3>
                        <p>Receive curated style suggestions with direct Pinterest inspiration links for endless outfit possibilities.</p>
                    </div>
                </div>

                <div class="research-banner">
                    <h3>Research-Backed Recommendations</h3>
                    <p>All recommendations are grounded in peer-reviewed academic studies from computer vision and fashion research. Our approach is based on analysis of over 18,000 celebrity images with body measurements and clothing preferences (Hidayati et al., 2018), understanding clothing compatibility through body shape correlation using the Fashion Takes Shape dataset with 181 users (Sattar et al., 2019), and style guidelines from fashion experts. The research demonstrates strong correlations between body shapes and clothing categories, with studies showing that certain garments (like wrap dresses for hourglass, peplum tops for rectangle, straight tunics for circle, printed blouses for triangle, and palazzo pants for inverted triangle) significantly enhance body proportions and create visual balance.</p>
                </div>
            </div>
        </section>
    </div>

    <div id="upload-screen" class="hidden">
        <section class="upload-section">
            <div class="container">
                <div style="text-align: center; margin-bottom: 60px;">
                    <h2 style="font-size: 42px; margin-bottom: 20px;">Let's Get Started</h2>
                    <p style="font-size: 20px; color: #666;">Upload your photo and location for personalized recommendations</p>
                </div>

                <div class="upload-grid">
                    <div class="form-card">
                        <h3>Your Photo</h3>
                        <p id="photo-error" style="color: #dc3545; font-weight: bold; margin-bottom: 10px; display: none;">‚ö†Ô∏è Missing input - Photo required</p>
                        <div onclick="clickUpload()" class="upload-area">
                            <div id="photo-preview" class="hidden">
                                <img id="preview-image" style="max-height: 250px; border-radius: 8px; margin-bottom: 20px;" />
                                <p style="font-size: 14px; color: #666;">Photo uploaded. Click to change.</p>
                            </div>
                            <div id="photo-placeholder">
                                <div style="font-size: 48px; margin-bottom: 20px; color: #999;">üì∑</div>
                                <p style="font-size: 18px; margin-bottom: 10px; color: #333;">Upload Full-Body Photo</p>
                                <p style="font-size: 14px; color: #999;">Your photo stays private and secure</p>
                            </div>
                        </div>
                        <input id="photo-input" type="file" accept="image/*" style="display: none;" />
                    </div>

                    <div class="form-card">
                        <h3>Your Location</h3>
                        <p id="location-error" style="color: #dc3545; font-weight: bold; margin-bottom: 10px; display: none;">‚ö†Ô∏è Missing input - Location required</p>
                        <input
                            id="location-input"
                            type="text"
                            placeholder="Enter your city or location"
                            autocomplete="off"
                        />
                        <div style="background: #e3f2fd; border: 1px solid #bbdefb; padding: 20px; border-radius: 4px; margin-top: 20px;">
                            <p style="font-size: 14px; color: #1565c0;">We use your location to provide weather-appropriate styling recommendations.</p>
                        </div>
                    </div>
                </div>

                <div class="quiz-card">
                    <h3 style="text-align: center; margin-bottom: 30px;">Body Type Quiz</h3>
                    <p style="text-align: center; color: #666; margin-bottom: 30px;">Answer these questions to help determine your body shape</p>
                    
                    <div class="quiz-question">
                        <h4>1. How would you describe your shoulders compared to your hips?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="selectQuizOption(1, 'a', this)">About the same width</div>
                            <div class="quiz-option" onclick="selectQuizOption(1, 'b', this)">Shoulders are wider than hips</div>
                            <div class="quiz-option" onclick="selectQuizOption(1, 'c', this)">Hips are wider than shoulders</div>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>2. How defined is your waist?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="selectQuizOption(2, 'a', this)">Very defined - curves inward significantly</div>
                            <div class="quiz-option" onclick="selectQuizOption(2, 'b', this)">Slightly defined</div>
                            <div class="quiz-option" onclick="selectQuizOption(2, 'c', this)">Not very defined - straighter silhouette</div>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>3. Where do you tend to gain weight first?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="selectQuizOption(3, 'a', this)">Evenly distributed</div>
                            <div class="quiz-option" onclick="selectQuizOption(3, 'b', this)">Around the waist/midsection</div>
                            <div class="quiz-option" onclick="selectQuizOption(3, 'c', this)">Around the hips and thighs</div>
                            <div class="quiz-option" onclick="selectQuizOption(3, 'd', this)">Upper body and arms</div>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>4. Which best describes your overall body silhouette?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="selectQuizOption(4, 'a', this)">Balanced curves - bust and hips similar size</div>
                            <div class="quiz-option" onclick="selectQuizOption(4, 'b', this)">Athletic and straight</div>
                            <div class="quiz-option" onclick="selectQuizOption(4, 'c', this)">Fuller midsection</div>
                            <div class="quiz-option" onclick="selectQuizOption(4, 'd', this)">Pear-shaped - bottom heavier</div>
                            <div class="quiz-option" onclick="selectQuizOption(4, 'e', this)">Top-heavy with narrower hips</div>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>5. What is your height?</h4>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="selectQuizOption(5, 'a', this)">Under 5'3" (160 cm) - Petite</div>
                            <div class="quiz-option" onclick="selectQuizOption(5, 'b', this)">5'3" - 5'7" (160-170 cm) - Average</div>
                            <div class="quiz-option" onclick="selectQuizOption(5, 'c', this)">5'8" - 5'11" (171-180 cm) - Tall</div>
                            <div class="quiz-option" onclick="selectQuizOption(5, 'd', this)">6'0"+ (181+ cm) - Very Tall</div>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin-bottom: 40px;">
                    <button id="quiz-submit-btn" onclick="submitQuiz()" class="btn">
                        See My Body Type
                    </button>
                </div>
            </div>
        </section>
    </div>

    <div id="body-type-result-screen" class="hidden">
        <section class="upload-section">
            <div class="container">
                <div style="text-align: center; margin-bottom: 60px;">
                    <h2 style="font-size: 42px; margin-bottom: 20px;">Your Body Type</h2>
                    <p style="font-size: 20px; color: #666;">Here's what we discovered about your unique shape</p>
                </div>

                <div style="background: white; padding: 60px; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); max-width: 700px; margin: 0 auto 40px; text-align: center;">
                    <div style="font-size: 72px; margin-bottom: 30px;">üë§</div>
                    <h3 id="result-body-type-name" style="font-size: 36px; margin-bottom: 20px; color: #2c2c2c;"></h3>
                    <p id="result-body-type-desc" style="font-size: 20px; color: #666; margin-bottom: 30px; line-height: 1.8;"></p>
                    <p id="result-height-info" style="font-size: 18px; color: #888; margin-bottom: 40px;"></p>
                    <button onclick="proceedToStylePreferences()" class="btn">Choose Your Style Preferences</button>
                </div>
            </div>
        </section>
    </div>

    <div id="style-preference-screen" class="hidden">
        <section class="upload-section">
            <div class="container">
                <div style="text-align: center; margin-bottom: 60px;">
                    <h2 style="font-size: 42px; margin-bottom: 20px;">Choose Your Style</h2>
                    <p style="font-size: 20px; color: #666;">Select the style that resonates with you</p>
                </div>

                <div class="style-prefs" style="max-width: 700px;">
                    <h3 style="text-align: center; margin-bottom: 30px;">Style Preferences</h3>
                    <div class="style-grid">
                        <button onclick="chooseStyle('all')" id="style-all" class="style-btn active">All</button>
                        <button onclick="chooseStyle('feminine')" id="style-feminine" class="style-btn">Feminine</button>
                        <button onclick="chooseStyle('masculine')" id="style-masculine" class="style-btn">Masculine</button>
                        <button onclick="chooseStyle('unisex')" id="style-unisex" class="style-btn">Unisex</button>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 50px;">
                    <button onclick="runAnalysis()" class="btn">
                        Get My Recommendations
                    </button>
                </div>
            </div>
        </section>
    </div>

    <div id="results-screen" class="hidden">
        <section style="padding: 80px 0;">
            <div class="container">
                <div style="text-align: center; margin-bottom: 60px;">
                    <h2 style="font-size: 42px; margin-bottom: 20px;">Your Style Guide</h2>
                    <p style="font-size: 20px; color: #666;">Evidence-based recommendations for you</p>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 50px;">
                    <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
                        <h3 style="font-size: 20px; margin-bottom: 15px;">Weather</h3>
                        <p id="weather-temp">Loading weather...</p>
                        <p style="color: #666;" id="weather-desc">Checking conditions...</p>
                    </div>
                    <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
                        <h3 style="font-size: 20px; margin-bottom: 15px;">Body Type</h3>
                        <p style="font-weight: bold;"><span id="body-type-name">Rectangle</span></p>
                        <p style="color: #666;" id="body-type-desc">Balanced straight silhouette</p>
                    </div>
                </div>

                <div id="recommendations-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 50px;"></div>

                <div style="text-align: center;">
                    <button onclick="restart()" class="btn">Try Another Look</button>
                </div>
            </div>
        </section>
    </div>

    <script>
        var userPhoto = null;
        var userLocation = '';
        var styleChoice = 'all';
        var userBodyType = '';
        var quizAnswers = {
            q1: null,
            q2: null,
            q3: null,
            q4: null,
            q5: null
        };

        var bodyData = {
            hourglass: {
                name: "Hourglass",
                description: "Balanced curves with defined waist",
                strengths: ["Feminine silhouette", "Defined waist", "Balanced proportions"]
            },
            rectangle: {
                name: "Rectangle",
                description: "Athletic straight silhouette", 
                strengths: ["Athletic build", "Versatile styling", "Clean lines"]
            },
            circle: {
                name: "Circle",
                description: "Fuller midsection with soft curves",
                strengths: ["Soft feminine curves", "Versatile proportions"]
            },
            triangle: {
                name: "Triangle",
                description: "Narrower shoulders with fuller hips",
                strengths: ["Balanced lower body", "Feminine curves"]
            },
            invertedTriangle: {
                name: "Inverted Triangle",
                description: "Broader shoulders with narrower hips",
                strengths: ["Athletic shoulders", "Strong upper body"]
            }
        };

        var recommendations = {
            hourglass: {
                feminine: [
                    { item: "Wrap dresses that highlight waist", image: "https://source.unsplash.com/400x300/?wrap-dress,fashion" },
                    { item: "Belted coats to emphasize curves", image: "https://source.unsplash.com/400x300/?belted-coat,fashion" },
                    { item: "High-waisted trousers", image: "https://source.unsplash.com/400x300/?high-waist-pants,fashion" },
                    { item: "Fitted dresses with defined waist", image: "https://source.unsplash.com/400x300/?fitted-dress,fashion" }
                ],
                masculine: [
                    { item: "Fitted blazers", image: "https://source.unsplash.com/400x300/?blazer,menswear" },
                    { item: "Structured shirts", image: "https://source.unsplash.com/400x300/?dress-shirt,formal" },
                    { item: "Tailored trousers", image: "https://source.unsplash.com/400x300/?tailored-pants,menswear" }
                ],
                unisex: [
                    { item: "Belted jackets", image: "https://source.unsplash.com/400x300/?jacket,fashion" },
                    { item: "High-waisted jeans", image: "https://source.unsplash.com/400x300/?high-waist-jeans,denim" },
                    { item: "Fitted tees with waist definition", image: "https://source.unsplash.com/400x300/?fitted-tshirt,casual" }
                ]
            },
            rectangle: {
                feminine: [
                    { item: "Peplum tops to create waist illusion", image: "https://source.unsplash.com/400x300/?peplum-top,fashion" },
                    { item: "Ruffled blouses for feminine detail", image: "https://source.unsplash.com/400x300/?ruffled-blouse,fashion" },
                    { item: "Cinched waist blazers", image: "https://source.unsplash.com/400x300/?blazer,women-fashion" },
                    { item: "Bow details and embellishments", image: "https://source.unsplash.com/400x300/?bow-dress,fashion" },
                    { item: "Textured pieces for dimension", image: "https://source.unsplash.com/400x300/?textured-clothing,fashion" }
                ],
                masculine: [
                    { item: "Layered shirts for structure", image: "https://source.unsplash.com/400x300/?layered-shirt,menswear" },
                    { item: "Textured sweaters", image: "https://source.unsplash.com/400x300/?sweater,menswear" },
                    { item: "Straight cut pants", image: "https://source.unsplash.com/400x300/?straight-pants,menswear" }
                ],
                unisex: [
                    { item: "Skinny jeans", image: "https://source.unsplash.com/400x300/?skinny-jeans,denim" },
                    { item: "Straight cut pieces", image: "https://source.unsplash.com/400x300/?straight-cut,fashion" },
                    { item: "Clothing with waist-creating details", image: "https://source.unsplash.com/400x300/?waist-detail,fashion" }
                ]
            },
            circle: {
                feminine: [
                    { item: "Straight tunics to camouflage waist", image: "https://source.unsplash.com/400x300/?tunic,fashion" },
                    { item: "A-line dresses with no waist definition", image: "https://source.unsplash.com/400x300/?aline-dress,fashion" },
                    { item: "Flowing blouses", image: "https://source.unsplash.com/400x300/?flowing-blouse,fashion" },
                    { item: "Unstructured dresses in straight lines", image: "https://source.unsplash.com/400x300/?loose-dress,fashion" }
                ],
                masculine: [
                    { item: "Straight cut blazers", image: "https://source.unsplash.com/400x300/?blazer,menswear" },
                    { item: "Unstructured shirts", image: "https://source.unsplash.com/400x300/?casual-shirt,menswear" },
                    { item: "Relaxed trousers", image: "https://source.unsplash.com/400x300/?relaxed-pants,menswear" }
                ],
                unisex: [
                    { item: "Straight coats with no waist emphasis", image: "https://source.unsplash.com/400x300/?straight-coat,fashion" },
                    { item: "Loose tunics", image: "https://source.unsplash.com/400x300/?loose-tunic,casual" },
                    { item: "Pieces without structure at waist", image: "https://source.unsplash.com/400x300/?unstructured-clothing,fashion" }
                ]
            },
            triangle: {
                feminine: [
                    { item: "Printed blouses to draw eye upward", image: "https://source.unsplash.com/400x300/?printed-blouse,fashion" },
                    { item: "Statement necklaces for upper body focus", image: "https://source.unsplash.com/400x300/?necklace,jewelry" },
                    { item: "Puff shoulder tops to balance proportions", image: "https://source.unsplash.com/400x300/?puff-sleeve,fashion" },
                    { item: "Bright colored tops", image: "https://source.unsplash.com/400x300/?colorful-top,fashion" }
                ],
                masculine: [
                    { item: "Structured blazers for upper body", image: "https://source.unsplash.com/400x300/?structured-blazer,menswear" },
                    { item: "Layered tops", image: "https://source.unsplash.com/400x300/?layered-clothing,menswear" },
                    { item: "Dark colored bottoms", image: "https://source.unsplash.com/400x300/?dark-pants,menswear" }
                ],
                unisex: [
                    { item: "Bold upper pieces", image: "https://source.unsplash.com/400x300/?bold-top,fashion" },
                    { item: "Dark bottoms to minimize hips", image: "https://source.unsplash.com/400x300/?dark-jeans,denim" },
                    { item: "Statement accessories on upper body", image: "https://source.unsplash.com/400x300/?accessories,fashion" }
                ]
            },
            invertedTriangle: {
                feminine: [
                    { item: "Palazzo trousers for lower body volume", image: "https://source.unsplash.com/400x300/?palazzo-pants,fashion" },
                    { item: "Voluminous skirts to balance shoulders", image: "https://source.unsplash.com/400x300/?full-skirt,fashion" },
                    { item: "Colorful bottoms to draw attention down", image: "https://source.unsplash.com/400x300/?colorful-pants,fashion" },
                    { item: "A-line skirts", image: "https://source.unsplash.com/400x300/?aline-skirt,fashion" }
                ],
                masculine: [
                    { item: "Straight leg pants", image: "https://source.unsplash.com/400x300/?straight-leg-pants,menswear" },
                    { item: "Textured bottoms", image: "https://source.unsplash.com/400x300/?textured-pants,menswear" },
                    { item: "Simple tops without shoulder emphasis", image: "https://source.unsplash.com/400x300/?simple-tshirt,casual" }
                ],
                unisex: [
                    { item: "Wide leg pants", image: "https://source.unsplash.com/400x300/?wide-leg-pants,fashion" },
                    { item: "Light colored bottoms", image: "https://source.unsplash.com/400x300/?light-pants,fashion" },
                    { item: "Minimal tops", image: "https://source.unsplash.com/400x300/?minimal-top,fashion" }
                ]
            }
        };

        function startUpload() {
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('upload-screen').style.display = 'block';
        }

        function clickUpload() {
            document.getElementById('photo-input').click();
        }

        function selectQuizOption(questionNum, answer, element) {
            var questionKey = 'q' + questionNum;
            quizAnswers[questionKey] = answer;
            
            var siblings = element.parentElement.querySelectorAll('.quiz-option');
            for (var i = 0; i < siblings.length; i++) {
                siblings[i].classList.remove('selected');
            }
            element.classList.add('selected');
            
            checkQuizComplete();
        }

        function checkQuizComplete() {
            // This function is no longer needed for button state
            // Button is always enabled, validation happens on click
        }

        function submitQuiz() {
            // Get current location value
            userLocation = document.getElementById('location-input').value.trim();
            
            var hasErrors = false;
            
            // Check if photo is uploaded
            if (!userPhoto) {
                document.getElementById('photo-error').style.display = 'block';
                hasErrors = true;
            }
            
            // Check if location is entered
            if (!userLocation || userLocation === '') {
                document.getElementById('location-error').style.display = 'block';
                hasErrors = true;
            }
            
            // If there are errors, scroll to first error and stop
            if (hasErrors) {
                if (!userPhoto) {
                    document.getElementById('photo-input').scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else if (!userLocation) {
                    document.getElementById('location-input').scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                return;
            }
            
            // Check if all quiz questions are answered
            if (!quizAnswers.q1 || !quizAnswers.q2 || !quizAnswers.q3 || !quizAnswers.q4 || !quizAnswers.q5) {
                alert('Please answer all quiz questions before continuing.');
                return;
            }
            
            var q1 = quizAnswers.q1;
            var q2 = quizAnswers.q2;
            var q3 = quizAnswers.q3;
            var q4 = quizAnswers.q4;
            var q5 = quizAnswers.q5;
            
            if (q1 === 'a' && q2 === 'a' && q4 === 'a') {
                userBodyType = 'hourglass';
            }
            else if ((q2 === 'b' || q2 === 'c') && (q4 === 'b' || (q1 === 'a' && q3 === 'a'))) {
                userBodyType = 'rectangle';
            }
            else if ((q2 === 'c' || q3 === 'b') && q4 === 'c') {
                userBodyType = 'circle';
            }
            else if (q1 === 'c' && (q3 === 'c' || q4 === 'd')) {
                userBodyType = 'triangle';
            }
            else if (q1 === 'b' && (q3 === 'd' || q4 === 'e')) {
                userBodyType = 'invertedTriangle';
            }
            else if (q4 === 'a') {
                userBodyType = 'hourglass';
            }
            else if (q4 === 'c') {
                userBodyType = 'circle';
            }
            else if (q4 === 'd') {
                userBodyType = 'triangle';
            }
            else if (q4 === 'e') {
                userBodyType = 'invertedTriangle';
            }
            else {
                userBodyType = 'rectangle';
            }
            
            var heightText = '';
            if (q5 === 'a') heightText = 'Petite (Under 5\'3")';
            else if (q5 === 'b') heightText = 'Average Height (5\'3" - 5\'7")';
            else if (q5 === 'c') heightText = 'Tall (5\'8" - 5\'11")';
            else if (q5 === 'd') heightText = 'Very Tall (6\'0"+)';
            
            document.getElementById('result-body-type-name').textContent = bodyData[userBodyType].name;
            document.getElementById('result-body-type-desc').textContent = bodyData[userBodyType].description;
            document.getElementById('result-height-info').textContent = heightText;
            
            document.getElementById('upload-screen').style.display = 'none';
            document.getElementById('body-type-result-screen').style.display = 'block';
        }

        function proceedToStylePreferences() {
            document.getElementById('body-type-result-screen').style.display = 'none';
            document.getElementById('style-preference-screen').style.display = 'block';
        }

        function chooseStyle(style) {
            styleChoice = style;
            var buttons = document.querySelectorAll('.style-btn');
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove('active');
            }
            document.getElementById('style-' + style).classList.add('active');
        }

        function checkInputs() {
            userLocation = document.getElementById('location-input').value.trim();
            
            // Show or hide error messages
            if (!userPhoto && document.getElementById('quiz-submit-btn')) {
                document.getElementById('photo-error').style.display = 'block';
            } else {
                document.getElementById('photo-error').style.display = 'none';
            }
            
            if (!userLocation && document.getElementById('quiz-submit-btn')) {
                document.getElementById('location-error').style.display = 'block';
            } else {
                document.getElementById('location-error').style.display = 'none';
            }
            
            // Update button state
            checkQuizComplete();
        }

        function runAnalysis() {
            if (userPhoto && userLocation && userBodyType) {
                document.getElementById('style-preference-screen').style.display = 'none';
                document.getElementById('results-screen').style.display = 'block';
                document.getElementById('recommendations-container').innerHTML = '<div style="text-align: center; padding: 40px;"><p style="font-size: 20px; color: #666;">Loading weather data and recommendations...</p></div>';
                
                fetchWeather(userLocation);
            }
        }

        function fetchWeather(location) {
            var geocodeUrl = 'https://geocoding-api.open-meteo.com/v1/search?name=' + encodeURIComponent(location) + '&count=1&language=en&format=json';
            
            fetch(geocodeUrl)
                .then(function(response) {
                    return response.json();
                })
                .then(function(geoData) {
                    if (!geoData.results || geoData.results.length === 0) {
                        throw new Error('Location not found');
                    }
                    
                    var lat = geoData.results[0].latitude;
                    var lon = geoData.results[0].longitude;
                    var locationName = geoData.results[0].name;
                    var country = geoData.results[0].country || '';
                    
                    var weatherUrl = 'https://api.open-meteo.com/v1/forecast?latitude=' + lat + '&longitude=' + lon + '&current=temperature_2m,weather_code&temperature_unit=fahrenheit';
                    
                    return fetch(weatherUrl)
                        .then(function(weatherResponse) {
                            return weatherResponse.json();
                        })
                        .then(function(weatherData) {
                            return {
                                weatherData: weatherData,
                                locationName: locationName,
                                country: country
                            };
                        });
                })
                .then(function(data) {
                    var tempF = Math.round(data.weatherData.current.temperature_2m);
                    var tempC = Math.round((tempF - 32) * 5/9);
                    var weatherCode = data.weatherData.current.weather_code;
                    
                    var weatherInfo = getWeatherFromCode(weatherCode);
                    var condition = weatherInfo.condition;
                    var description = weatherInfo.description;
                    
                    var displayLocation = data.locationName + (data.country ? ', ' + data.country : '');
                    
                    document.getElementById('weather-temp').textContent = tempF + '¬∞F (' + tempC + '¬∞C) in ' + displayLocation;
                    document.getElementById('weather-desc').textContent = description;
                    
                    showResults(tempC, condition);
                })
                .catch(function(error) {
                    console.error('Weather fetch error:', error);
                    document.getElementById('weather-temp').textContent = '72¬∞F (22¬∞C) in ' + userLocation;
                    document.getElementById('weather-desc').textContent = 'Weather unavailable - showing general recommendations';
                    showResults(22, 'Clear');
                });
        }
        
        function getWeatherFromCode(code) {
            if (code === 0) return { condition: 'Clear', description: 'Clear sky' };
            if (code === 1) return { condition: 'Clear', description: 'Mainly clear' };
            if (code === 2) return { condition: 'Clouds', description: 'Partly cloudy' };
            if (code === 3) return { condition: 'Clouds', description: 'Overcast' };
            if (code === 45 || code === 48) return { condition: 'Fog', description: 'Foggy' };
            if (code === 51 || code === 53 || code === 55) return { condition: 'Drizzle', description: 'Drizzle' };
            if (code === 56 || code === 57) return { condition: 'Drizzle', description: 'Freezing drizzle' };
            if (code === 61 || code === 63 || code === 65) return { condition: 'Rain', description: 'Rain' };
            if (code === 66 || code === 67) return { condition: 'Rain', description: 'Freezing rain' };
            if (code === 71 || code === 73 || code === 75) return { condition: 'Snow', description: 'Snow' };
            if (code === 77) return { condition: 'Snow', description: 'Snow grains' };
            if (code === 80 || code === 81 || code === 82) return { condition: 'Rain', description: 'Rain showers' };
            if (code === 85 || code === 86) return { condition: 'Snow', description: 'Snow showers' };
            if (code === 95) return { condition: 'Thunderstorm', description: 'Thunderstorm' };
            if (code === 96 || code === 99) return { condition: 'Thunderstorm', description: 'Thunderstorm with hail' };
            return { condition: 'Clear', description: 'Clear' };
        }

        function showResults(temperature, weatherCondition) {
            var recsContainer = document.getElementById('recommendations-container');
            recsContainer.innerHTML = '';
            
            var bodyTypeNameElem = document.getElementById('body-type-name');
            var bodyTypeDescElem = document.getElementById('body-type-desc');
            if (bodyTypeNameElem && bodyTypeDescElem) {
                bodyTypeNameElem.textContent = bodyData[userBodyType].name;
                bodyTypeDescElem.textContent = bodyData[userBodyType].description;
            }
            
            var recs = recommendations[userBodyType];
            var types = [
                { key: 'feminine', title: 'Feminine Styles' },
                { key: 'masculine', title: 'Masculine Styles' },
                { key: 'unisex', title: 'Unisex Styles' }
            ];
            
            var weatherRecs = getWeatherRecommendations(temperature, weatherCondition);
            
            for (var j = 0; j < types.length; j++) {
                var type = types[j];
                if (styleChoice === 'all' || styleChoice === type.key) {
                    var div = document.createElement('div');
                    div.style.cssText = 'background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);';
                    
                    var html = '<h4 style="font-size: 18px; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px;">' + type.title + '</h4>';
                    
                    if (weatherRecs[type.key] && weatherRecs[type.key].length > 0) {
                        html += '<div style="background: #e3f2fd; padding: 15px; border-radius: 4px; margin-bottom: 20px;"><p style="font-size: 14px; color: #1565c0; margin: 0;"><strong>Weather-appropriate:</strong></p></div>';
                        for (var w = 0; w < weatherRecs[type.key].length; w++) {
                            var weatherItem = weatherRecs[type.key][w];
                            var pinterestUrl = 'https://www.pinterest.com/search/pins/?q=' + encodeURIComponent(weatherItem.item + ' outfit');
                            html += '<div style="margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #f0f0f0;">';
                            html += '<div style="background: #f5f5f5; height: 150px; border-radius: 4px; margin-bottom: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; border: 1px solid #e0e0e0;">';
                            html += '<img src="' + weatherItem.image + '" alt="' + weatherItem.item + '" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.parentElement.innerHTML=\'<span style=color:#999;font-size:12px>Image: ' + weatherItem.image.split('/').pop() + '</span>\'">';
                            html += '</div>';
                            html += '<p style="margin-bottom: 10px; font-weight: 500;">' + weatherItem.item + ' <span style="background: #e3f2fd; color: #1565c0; padding: 2px 8px; border-radius: 3px; font-size: 11px;">WEATHER</span></p>';
                            html += '<a href="' + pinterestUrl + '" target="_blank" style="background: #E60023; color: white; padding: 8px 16px; font-size: 12px; text-decoration: none; border-radius: 20px; text-transform: uppercase;">Pinterest</a>';
                            html += '</div>';
                        }
                    }
                    
                    for (var k = 0; k < recs[type.key].length; k++) {
                        var recItem = recs[type.key][k];
                        var pinterestUrl2 = 'https://www.pinterest.com/search/pins/?q=' + encodeURIComponent(recItem.item + ' outfit');
                        html += '<div style="margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #f0f0f0;">';
                        html += '<div style="background: #f5f5f5; height: 150px; border-radius: 4px; margin-bottom: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; border: 1px solid #e0e0e0;">';
                        html += '<img src="' + recItem.image + '" alt="' + recItem.item + '" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.parentElement.innerHTML=\'<span style=color:#999;font-size:12px>Image: ' + recItem.image.split('/').pop() + '</span>\'">';
                        html += '</div>';
                        html += '<p style="margin-bottom: 10px; font-weight: 500;">' + recItem.item + '</p>';
                        html += '<a href="' + pinterestUrl2 + '" target="_blank" style="background: #E60023; color: white; padding: 8px 16px; font-size: 12px; text-decoration: none; border-radius: 20px; text-transform: uppercase;">Pinterest</a>';
                        html += '</div>';
                    }
                    
                    div.innerHTML = html;
                    recsContainer.appendChild(div);
                }
            }
        }

        function getWeatherRecommendations(temp, condition) {
            var weatherItems = {
                feminine: [],
                masculine: [],
                unisex: []
            };
            
            if (temp < 10) {
                weatherItems.feminine.push(
                    { item: "Warm coat or parka", image: "https://source.unsplash.com/400x300/?winter-coat,women" },
                    { item: "Sweater or cardigan", image: "https://source.unsplash.com/400x300/?sweater,women" },
                    { item: "Boots", image: "https://source.unsplash.com/400x300/?boots,fashion" }
                );
                weatherItems.masculine.push(
                    { item: "Winter jacket", image: "https://source.unsplash.com/400x300/?winter-jacket,men" },
                    { item: "Sweater", image: "https://source.unsplash.com/400x300/?sweater,menswear" },
                    { item: "Boots", image: "https://source.unsplash.com/400x300/?boots,menswear" }
                );
                weatherItems.unisex.push(
                    { item: "Warm coat", image: "https://source.unsplash.com/400x300/?coat,winter" },
                    { item: "Scarf", image: "https://source.unsplash.com/400x300/?scarf,fashion" },
                    { item: "Boots", image: "https://source.unsplash.com/400x300/?boots" }
                );
            }
            else if (temp >= 10 && temp < 18) {
                weatherItems.feminine.push(
                    { item: "Light jacket or cardigan", image: "light-cardigan-photo.jpg" },
                    { item: "Long sleeve top", image: "https://source.unsplash.com/400x300/?long-sleeve,fashion" }
                );
                weatherItems.masculine.push(
                    { item: "Light jacket", image: "light-jacket-masculine-photo.jpg" },
                    { item: "Long sleeve shirt", image: "https://source.unsplash.com/400x300/?dress-shirt,menswear" }
                );
                weatherItems.unisex.push(
                    { item: "Denim jacket", image: "https://source.unsplash.com/400x300/?denim-jacket" },
                    { item: "Hoodie", image: "https://source.unsplash.com/400x300/?hoodie,casual" }
                );
            }
            else if (temp >= 18 && temp < 25) {
                weatherItems.feminine.push(
                    { item: "Light blouse", image: "https://source.unsplash.com/400x300/?blouse,fashion" },
                    { item: "Midi skirt", image: "https://source.unsplash.com/400x300/?midi-skirt,fashion" }
                );
                weatherItems.masculine.push(
                    { item: "Short sleeve shirt", image: "https://source.unsplash.com/400x300/?polo-shirt,menswear" },
                    { item: "Chinos", image: "https://source.unsplash.com/400x300/?chinos,menswear" }
                );
                weatherItems.unisex.push(
                    { item: "T-shirt", image: "https://source.unsplash.com/400x300/?tshirt,casual" },
                    { item: "Jeans", image: "https://source.unsplash.com/400x300/?jeans,denim" }
                );
            }
            else {
                weatherItems.feminine.push(
                    { item: "Summer dress", image: "https://source.unsplash.com/400x300/?summer-dress,fashion" },
                    { item: "Tank top", image: "https://source.unsplash.com/400x300/?tank-top,summer" },
                    { item: "Shorts", image: "https://source.unsplash.com/400x300/?shorts,fashion" }
                );
                weatherItems.masculine.push(
                    { item: "Short sleeve shirt", image: "https://source.unsplash.com/400x300/?tshirt,menswear" },
                    { item: "Shorts", image: "https://source.unsplash.com/400x300/?shorts,menswear" }
                );
                weatherItems.unisex.push(
                    { item: "T-shirt", image: "https://source.unsplash.com/400x300/?tshirt" },
                    { item: "Shorts", image: "https://source.unsplash.com/400x300/?shorts" },
                    { item: "Sandals", image: "https://source.unsplash.com/400x300/?sandals,summer" }
                );
            }
            
            if (condition === 'Rain' || condition === 'Drizzle' || condition === 'Thunderstorm') {
                weatherItems.feminine.unshift({ item: "Waterproof jacket", image: "https://source.unsplash.com/400x300/?raincoat,women" });
                weatherItems.masculine.unshift({ item: "Rain jacket", image: "https://source.unsplash.com/400x300/?raincoat,men" });
                weatherItems.unisex.unshift({ item: "Raincoat", image: "https://source.unsplash.com/400x300/?raincoat" });
            }
            
            return weatherItems;
        }

        function restart() {
            userPhoto = null;
            userLocation = '';
            styleChoice = 'all';
            userBodyType = '';
            quizAnswers = { q1: null, q2: null, q3: null, q4: null, q5: null };
            
            document.getElementById('photo-input').value = '';
            document.getElementById('location-input').value = '';
            document.getElementById('photo-preview').style.display = 'none';
            document.getElementById('photo-placeholder').style.display = 'block';
            
            var quizOptions = document.querySelectorAll('.quiz-option');
            for (var i = 0; i < quizOptions.length; i++) {
                quizOptions[i].classList.remove('selected');
            }
            
            document.getElementById('quiz-submit-btn').disabled = true;
            
            chooseStyle('all');
            checkInputs();
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('body-type-result-screen').style.display = 'none';
            document.getElementById('style-preference-screen').style.display = 'none';
            document.getElementById('welcome-screen').style.display = 'block';
        }

        document.getElementById('photo-input').addEventListener('change', function(event) {
            var file = event.target.files[0];
            if (file) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    userPhoto = e.target.result;
                    document.getElementById('preview-image').src = userPhoto;
                    document.getElementById('photo-preview').style.display = 'block';
                    document.getElementById('photo-placeholder').style.display = 'none';
                    document.getElementById('photo-error').style.display = 'none';
                };
                reader.readAsDataURL(file);
            }
        });

        document.getElementById('location-input').addEventListener('input', function() {
            userLocation = this.value.trim();
            if (userLocation) {
                document.getElementById('location-error').style.display = 'none';
            }
        });
    </script>
</body>
</html>
